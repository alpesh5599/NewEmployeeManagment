<div class="card container" style="width: max-content;">

    <div class="card-body">

        <div style="position: absolute; right: 3rem; top: 15px;">
            <button class="btn btn-secondary" (click)="showCandidateForm()" *ngIf="showButton">
                <svg enable-background="new 0 0 50 50" height="20px" id="Layer_1" version="1.1" viewBox="0 0 50 50"
                    width="30px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg"
                    xmlns:xlink="http://www.w3.org/1999/xlink">

                    <rect fill="none" height="50" width="50" />
                    <line fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="4" x1="9" x2="41" y1="25"
                        y2="25" />
                    <line fill="none" stroke="#000000" stroke-miterlimit="10" stroke-width="4" x1="25" x2="25" y1="9"
                        y2="41" />
                </svg>
            </button>
        </div>

        <div class="container" *ngIf="showForm" style="position: relative;">
            <h3 class="card-title" style="margin-bottom: 3rem;"> {{title}} </h3>

            <form [formGroup]="candidateForm" (ngSubmit)="submitDetails()">
                <div class="row" style="display: flex;">
                    <div class="mt-3 col-6">
                        <label>First Name :</label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="firstName" type="text" name="firstname" placeholder="Enter First Name">
                        <span *ngIf="this.candidateForm.get('firstName')?.touched">
                            <span style="color: red;" *ngIf="this.candidateForm.get('firstName')?.invalid">
                                <span *ngIf="this.candidateForm.get('firstName')?.hasError('required')">
                                    *Required
                                </span>
                            </span>
                        </span>
                    </div>

                    <div class="mt-3 col-6">
                        <label>Last Name :</label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="lastName" type="text" name="lastname" placeholder="Enter Last Name">
                        <span *ngIf="this.candidateForm.get('candidateLastName')?.touched">
                            <span style="color: red;" *ngIf="this.candidateForm.get('candidateLastName')?.invalid">
                                <span *ngIf="this.candidateForm.get('candidateLastName')?.hasError('required')">
                                    *Required
                                </span>
                            </span>
                        </span>
                    </div>
                </div>

                <div class="row" style="display: flex;">
                    <div class="mt-3 col-6">
                        <label class="label">Email :</label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control" formControlName="email"
                            type="email" name="email" placeholder="Enter E-mail Address">
                        <span *ngIf="this.candidateForm.get('candidateEmail')?.touched">
                            <span style="color: red;" *ngIf="this.candidateForm.get('candidateEmail')?.invalid">
                                <span *ngIf="this.candidateForm.get('candidateEmail')?.hasError('required')">
                                    *Required
                                </span>
                                <span *ngIf="this.candidateForm.get('candidateEmail')?.hasError('email')">
                                    *Email is not correct</span>
                            </span>
                        </span>
                    </div>

                    <div class="mt-3 col-6">
                        <label class="label">Phone No :</label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="contact" type="number"
                            onKeyPress="if(this.value.length==10) return false; else return true;" name="phoneNo"
                            placeholder="Enter Phone No ">
                        <span *ngIf="this.candidateForm.get('candidatePhoneNo')?.touched">
                            <span style="color: red;" *ngIf="this.candidateForm.get('candidatePhoneNo')?.invalid">
                                <span *ngIf="this.candidateForm.get('candidatePhoneNo')?.hasError('required')">
                                    *Required
                                </span>
                            </span>
                        </span>
                    </div>
                </div>

                <div class="row" style="display: flex;">

                    <div class="mt-3 col-6">
                        <label class="label">Availability for Joining :</label>
                        &nbsp;
                        <select style="display: inline-block; width: 40vh;" class="form-select form-control"
                            formControlName="joining">
                            <option selected disabled value="">-- Select--</option>
                            <option>Immediate</option>
                            <option>0-2 weeks</option>
                            <option>2-4 weeks</option>
                            <option>4-6 weeks</option>
                            <option>6-8 weeks</option>
                            <option>8-10 weeks</option>
                            <option>10-12 weeks</option>
                            <option>12-14 weeks</option>
                            <option>14-16 weeks</option>
                        </select>
                    </div>

                    <div class="mt-3 col-6">
                        <label class="label">Choose Position :</label>
                        &nbsp;
                        <select style="display: inline-block; width: 40vh;" class="form-select form-control"
                            formControlName="position">
                            <option selected disabled value="">--Select--</option>
                            <option>Java Developer</option>
                            <option>Angular Developer</option>
                            <option>Full stack Developer</option>
                        </select>
                    </div>

                </div>

                <div class="row" style="display: flex;">
                    <div class="mt-3 col-6">
                        <label class="label">Upload Resume: </label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" formControlName="file" type="file"
                            name="file" (change)="onFileChange($event)">
                    </div>

                    <div class="mt-3 col-6">
                        <label class="label">Enter Skills :</label>
                        &nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control" formControlName="skills"
                            type="text" name="skills" placeholder="Enter your skills">
                        <span *ngIf="this.candidateForm.get('candidateSkills')?.touched">
                            <span style="color: red;" *ngIf="this.candidateForm.get('candidateSkills')?.invalid">
                                <span *ngIf="this.candidateForm.get('candidateSkills')?.hasError('required')">
                                    *Required
                                </span>
                            </span>
                        </span>
                    </div>
                </div>

                <div class="mt-3 col-12">
                    <textarea class="form-control" formControlName="comments" name="comments"
                        placeholder="Enter your comments">
                    </textarea>
                </div>

                <div *ngIf="showmsg" class="mt-3" style="color: green;">
                    Candiadate is successfully Registered...
                </div>

                <div class="form-button mt-3">
                    <button type="submit" class="btn btn-outline-secondary">Register</button>
                    &nbsp;&nbsp;
                    <button type="reset" class="btn" (click)="showCandidateList()" *ngIf="showButton1">Cancel</button>
                </div>

            </form>
        </div>

        <div class="container-fluid" *ngIf="showList">
            <h3 class="card-title" style="margin-bottom: 3rem;"></h3>
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Position</th>
                        <th>Name</th>
                        <th>Email</th>
                        <th>Phone No</th>
                        <!-- <th>File</th> -->
                        <th>Status</th>
                        <th>Joining</th>
                        <th>Actions</th>

                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let candidate of candidates">
                        <td>{{candidate.id}}</td>
                        <td>{{candidate.position}}</td>
                        <td>{{candidate.firstName}} {{candidate.lastName}}</td>
                        <td>{{candidate.email}}</td>
                        <!-- <td>{{candidate.fileData}}</td> -->
                        <td>{{candidate.contact}}</td>
                        <!-- <td>{{candidate.skills}}</td> -->
                        <!-- <td>{{candidate.joining}}</td> -->
                        <td>{{candidate.candidateStatus}}</td>
                        <td>{{candidate.joining}}</td>

                        <td><a style="cursor: pointer;" (click)="edit(candidate)" (click)="showEditingForm()">
                                <svg class="feather feather-edit" fill="none" height="24" stroke="currentColor"
                                    stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24"
                                    width="24" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7" />
                                    <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z" />
                                </svg>
                            </a>
                            <a class="btn" (click)="sendtointrvw(candidate)">Intv</a>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>


        <!-- ================= For Edit candidate  ============================================= -->

        <div class="container" *ngIf="showEditForm" style="position: relative;">
            <h3 class="card-title" style="margin-bottom: 3rem;">Edit Details</h3>

            <form [formGroup]="editForm" (ngSubmit)="updateCandidate()">
                <div class="mt-3">
                    <label>Choose Position</label>
                    &nbsp;
                    <select class="form-select form-control" formControlName="position"
                        style="width: 30vh;display: block;margin-right: 10px;">
                        <option selected disabled value="">Choose Position</option>
                        <option>Java Developer</option>
                        <option>Angular Developer</option>
                        <option>Full stack Developer</option>
                    </select>
                </div>
                <div class="mt-3">
                    <label>Choose Status</label>
                    &nbsp;
                    <select style="width: 30vh;display: block;margin-right: 10px;" class="form-select form-control"
                        formControlName="candidateStatus">
                        <option selected disabled value="">Select</option>
                        <option *ngFor="let type of status" [value]="type">{{type}}</option>
                    </select>
                </div>
                <div style="display: flex;">
                    <div class="mt-3">
                        <label>Enter First Name :</label>&nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="firstName" type="text" name="firstname" placeholder="Enter First Name">
                        <!-- <span *ngIf="this.editForm.get('firstName')?.touched">
                            <span style="color: red;" *ngIf="this.editForm.get('firstName')?.invalid">
                                <span *ngIf="this.editForm.get('firstName')?.hasError('required')">
                                    *Required
                                </span>
                            </span>
                        </span> -->
                    </div>

                    <div class="mt-3" style="position: absolute; right: 0;">
                        <label>Enter Last Name :</label>&nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="lastName" type="text" name="lastname" placeholder="Enter Last Name">
                        <!-- <span *ngIf="this.candidateForm.get('candidateLastName')?.touched">
                                                    <span style="color: red;" *ngIf="this.candidateForm.get('candidateLastName')?.invalid">
                                                        <span *ngIf="this.candidateForm.get('candidateLastName')?.hasError('required')">
                                                            *Required
                                                        </span>
                                                    </span>
                                                </span> -->
                    </div>
                </div>

                <div style="display: flex;">
                    <div class="mt-3">
                        <label>Enter Email :</label>
                        <input style="display: inline-block; width: 40vh;" class="form-control" formControlName="email"
                            type="email" name="email" placeholder="Enter E-mail Address">
                        <!-- <span *ngIf="this.candidateForm.get('candidateEmail')?.touched">
                                                    <span style="color: red;" *ngIf="this.candidateForm.get('candidateEmail')?.invalid">
                                                        <span *ngIf="this.candidateForm.get('candidateEmail')?.hasError('required')">
                                                            *Required
                                                        </span>
                                                        <span *ngIf="this.candidateForm.get('candidateEmail')?.hasError('email')">
                                                            *Email is not correct</span>
                                                    </span>
                                                </span> -->
                    </div>

                    <div class="mt-3" style="position: absolute; right: 0;">
                        <label>Enter Phone No :</label>&nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control"
                            formControlName="contact" type="number"
                            onKeyPress="if(this.value.length==10) return false; else return true;" name="phoneNo"
                            placeholder="Enter Phone No ">
                        <!-- <span *ngIf="this.candidateForm.get('candidatePhoneNo')?.touched">
                                                    <span style="color: red;" *ngIf="this.candidateForm.get('candidatePhoneNo')?.invalid">
                                                        <span *ngIf="this.candidateForm.get('candidatePhoneNo')?.hasError('required')">
                                                            *Required
                                                        </span>
                                                    </span>
                                                </span> -->
                    </div>
                </div>

                <div style="display: flex;">

                    <div class="mt-3">
                        <label>Availability for Joining :</label>&nbsp;
                        <select style="display: inline-block; width: 20vh;" class="form-select form-control"
                            formControlName="joining">
                            <option selected disabled value="">-- Select --</option>
                            <option>Immediate</option>
                            <option>0-2 weeks</option>
                            <option>2-4 weeks</option>
                            <option>4-6 weeks</option>
                            <option>6-8 weeks</option>
                            <option>8-10 weeks</option>
                            <option>10-12 weeks</option>
                            <option>12-14 weeks</option>
                            <option>14-16 weeks</option>
                        </select>
                    </div>

                    <div class="mt-3" style="position: absolute; right: 0;">
                        <label>Enter Skills :</label>&nbsp;
                        <input style="display: inline-block; width: 40vh;" class="form-control" formControlName="skills"
                            type="text" name="skills" placeholder="Enter your skills">
                        <!-- <span *ngIf="this.candidateForm.get('candidateSkills')?.touched">
                                                    <span style="color: red;" *ngIf="this.candidateForm.get('candidateSkills')?.invalid">
                                                        <span *ngIf="this.candidateForm.get('candidateSkills')?.hasError('required')">
                                                            *Required
                                                        </span>
                                                    </span>
                                                </span> -->
                    </div>

                </div>

                <div class="mt-3">
                    <input class="form-control" style="width: 50vh;" formControlName="fileData" type="file"
                        (change)="onFileChange($event)">


                </div>

                <div class="mt-3">
                    <textarea class="form-control" formControlName="comments" name="comments"
                        placeholder="Enter your comments">
                    </textarea>
                </div>

                <div *ngIf="showmsg" class="mt-3" style="color: green;">
                    Candiadate is successfully Updated...
                </div>

                <div *ngIf="showmsg1" class="mt-3" style="color: green;">
                    Required Fields
                </div>

                

                <div class="form-button mt-3">
                    <button type="submit" class="btn btn-outline-secondary">Update</button>
                    &nbsp;
                    &nbsp;
                    <button type="reset" class="btn" (click)="showCandidateList()">Cancel</button>
                </div>

            </form>
        </div>
    </div>
</div>
